(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6559:function(e,n,r){Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.bind(r,5890))},5890:function(e,n,r){"use strict";r.r(n),r.d(n,{LoginForm:function(){return R}});var t,a,o,i,l,c=r(7437),s=r(2265),d=r.t(s,2),u=r(7873);class h extends u.l4{}async function m(e,n,r){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a="".concat(f(n),"/").concat(e);try{var o;let e={headers:{"Content-Type":"application/json",...(null==t?void 0:null===(o=t.headers)||void 0===o?void 0:o.cookie)?{cookie:t.headers.cookie}:{}}};(null==t?void 0:t.body)&&(e.body=JSON.stringify(t.body),e.method="POST");let n=await fetch(a,e),r=await n.json();if(!n.ok)throw r;return r}catch(e){return r.error(new h(e.message,e)),null}}function f(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function p(e){let n=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let r=new URL(e||n),t=("/"===r.pathname?n.pathname:r.pathname).replace(/\/$/,""),a="".concat(r.origin).concat(t);return{origin:r.origin,host:r.host,path:t,base:a,toString:()=>a}}var w=r(9079);let v={baseUrl:p(null!==(a=w.env.NEXTAUTH_URL)&&void 0!==a?a:w.env.VERCEL_URL).origin,basePath:p(w.env.NEXTAUTH_URL).path,baseUrlServer:p(null!==(i=null!==(o=w.env.NEXTAUTH_URL_INTERNAL)&&void 0!==o?o:w.env.NEXTAUTH_URL)&&void 0!==i?i:w.env.VERCEL_URL).origin,basePathServer:p(null!==(l=w.env.NEXTAUTH_URL_INTERNAL)&&void 0!==l?l:w.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},b={debug:console.debug,error:console.error,warn:console.warn};async function g(){var e;let n=await m("csrf",v,b);return null!==(e=null==n?void 0:n.csrfToken)&&void 0!==e?e:""}async function y(){return m("providers",v,b)}async function U(e,n,r){var t,a,o;let{redirect:i=!0}=null!=n?n:{},l=null!==(a=null!==(t=null==n?void 0:n.redirectTo)&&void 0!==t?t:null==n?void 0:n.callbackUrl)&&void 0!==a?a:window.location.href,c=f(v),s=await y();if(!s){window.location.href="".concat(c,"/error");return}if(!e||!(e in s)){window.location.href="".concat(c,"/signin?").concat(new URLSearchParams({callbackUrl:l}));return}let d="credentials"===s[e].type,u="email"===s[e].type,h="".concat(c,"/").concat(d?"callback":"signin","/").concat(e),m=await g(),p=await fetch("".concat(h,"?").concat(new URLSearchParams(r)),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...n,csrfToken:m,callbackUrl:l})}),w=await p.json();if(i||!(d||u)){let e=null!==(o=w.url)&&void 0!==o?o:l;window.location.href=e,e.includes("#")&&window.location.reload();return}let b=new URL(w.url).searchParams.get("error"),U=new URL(w.url).searchParams.get("code");return p.ok&&await v._getSession({event:"storage"}),{error:b,code:U,status:p.status,ok:p.ok,url:b?null:w.url}}null===(t=s.createContext)||void 0===t||t.call(d,void 0);var x=r(7907),N=r(9414);function R(){let e=(0,x.useRouter)(),[n,r]=(0,s.useState)(!1);async function t(n){n.preventDefault(),r(!0);let t=new FormData(n.currentTarget),a=t.get("email"),o=t.get("password");try{let n=await U("credentials",{email:a,password:o,redirect:!1});if(null==n?void 0:n.error){N.default.error("Credenciales inv\xe1lidas");return}e.push("/dashboard"),e.refresh()}catch(e){N.default.error("Ocurri\xf3 un error al iniciar sesi\xf3n")}finally{r(!1)}}return(0,c.jsxs)("form",{className:"space-y-6",onSubmit:t,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo electr\xf3nico"}),(0,c.jsx)("div",{className:"mt-1",children:(0,c.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-accent-500 focus:outline-none focus:ring-accent-500 sm:text-sm"})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,c.jsx)("div",{className:"mt-1",children:(0,c.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-accent-500 focus:outline-none focus:ring-accent-500 sm:text-sm"})})]}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"submit",disabled:n,className:"flex w-full justify-center rounded-md border border-transparent bg-accent-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-accent-700 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"})})]})}}},function(e){e.O(0,[250,414,8,971,69,744],function(){return e(e.s=6559)}),_N_E=e.O()}]);