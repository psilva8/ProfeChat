(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{9369:function(e,s,a){Promise.resolve().then(a.bind(a,2867))},2867:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var r=a(7437),t=a(2265),i=a(9414);function n(){let[e,s]=(0,t.useState)(!1),[a,n]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[o,d]=(0,t.useState)({subject:"",grade:"",topic:""}),m=async e=>{e.preventDefault(),s(!0),c(null),n("");try{let e=await fetch("/api/proxy/health"),s=await e.json();if("healthy"!==s.status)throw Error("El servidor Flask no est\xe1 funcionando correctamente. Por favor, intente nuevamente.");if(!s.openai_key_configured)throw Error("La clave de API de OpenAI no est\xe1 configurada correctamente.");let a=await fetch("/api/proxy/generate-lesson",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){let e=await a.json();throw Error(e.error||"\xa1Error HTTP! estado: ".concat(a.status))}let r=await a.json();if(r.success)n(r.lesson_plan),i.toast.success("\xa1Plan de lecci\xf3n generado exitosamente!");else throw Error(r.error||"Error al generar el plan de lecci\xf3n")}catch(s){let e=s instanceof Error?s.message:"Ocurri\xf3 un error desconocido";c(e),i.toast.error(e)}finally{s(!1)}},u=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a})),l&&c(null)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-5",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold leading-7 text-gray-900",children:"Planificador de Lecciones"}),(0,r.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Genera planes de lecciones detallados alineados con el curr\xedculo peruano."})]}),l&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,r.jsx)("p",{children:l})})]})})}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium leading-6 text-gray-900",children:"Asignatura"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("input",{type:"text",name:"subject",id:"subject",required:!0,value:o.subject,onChange:u,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"ej., Matem\xe1ticas, Ciencias, Comunicaci\xf3n"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"grade",className:"block text-sm font-medium leading-6 text-gray-900",children:"Grado"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("select",{id:"grade",name:"grade",required:!0,value:o.grade,onChange:u,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,r.jsx)("option",{value:"",children:"Seleccionar grado"}),[1,2,3,4,5,6].map(e=>(0,r.jsxs)("option",{value:e,children:[e,"\xb0 Grado"]},e))]})})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium leading-6 text-gray-900",children:"Tema"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("input",{type:"text",name:"topic",id:"topic",required:!0,value:o.topic,onChange:u,placeholder:"ej., Fracciones, Sistema Solar, Producci\xf3n de Textos",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:e,className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50",children:e?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generando..."]}):"Generar Plan de Lecci\xf3n"})})]}),a&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Plan de Lecci\xf3n Generado"}),(0,r.jsx)("div",{className:"mt-4 rounded-md bg-white p-6 shadow",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:a})})]})]})}}},function(e){e.O(0,[414,971,69,744],function(){return e(e.s=9369)}),_N_E=e.O()}]);